<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏´‡∏ß‡∏¢ Simulator Demo</title>

<style>
    body {
        background:#f7d3f2;
        font-family:'Sarabun', sans-serif;
        padding:20px;
    }
    .box {
        width:100%;
        max-width:500px;
        margin:auto;
        background:#fff;
        padding:20px;
        border-radius:15px;
        box-shadow:0 5px 20px rgba(0,0,0,0.15);
    }
    h2 {
        text-align:center;
        color:#c449d5;
        margin-bottom:20px;
        font-weight:900;
    }

    .mode-row {
        display:flex;
        gap:10px;
        margin-bottom:15px;
    }
    .mode-btn {
        background:#ffe9a8;
        border:none;
        padding:10px 18px;
        border-radius:8px;
        cursor:pointer;
        font-weight:bold;
    }
    .mode-btn.active {
        background:#ffb700;
        color:white;
    }

    input[type="text"] {
        width:100%;
        padding:12px;
        border-radius:10px;
        border:1px solid:#aaa;
        font-size:16px;
        transition:0.2s;
    }

    .numbers-container {
        min-height:50px;
        padding:10px;
        border-radius:10px;
        border:1px solid:#ddd;
        background:#fffafc;
        display:flex;
        flex-wrap:wrap;
        gap:6px;
        margin-top:4px;
    }

    .num-pill {
        background:#1e6bff;
        color:#fff;
        padding:6px 10px;
        border-radius:8px;
        font-size:15px;
        font-weight:bold;
        border:none;
        cursor:pointer;
    }

    .row { 
        display:flex; 
        gap:10px; 
        margin:10px 0; 
    }

    input[type="number"] {
        width:100%;
        padding:12px;
        border-radius:10px;
        border:1px solid:#ccc;
        font-size:16px;
    }

    .btn-rev  { background:#ffe06c; padding:12px 16px; border-radius:10px; font-weight:bold; }
    .btn-clear{ background:#ffb3c1; padding:12px 16px; border-radius:10px; font-weight:bold; }
    .btn-add  { background:#ff44c7; color:white; padding:12px 16px; border-radius:10px; font-weight:bold; }

    .bill-box {
        margin-top:20px;
        background:#ffe7f8;
        padding:15px;
        border-radius:15px;
    }

    .bill {
        background:white;
        padding:15px;
        border-radius:12px;
        margin-bottom:15px;
        display:flex;
        justify-content:space-between;
        border:1px solid:#ddd;
    }

    .bill-left {
        width:85%;
        font-size:16px;
    }
    .bill-title {
        font-weight:bold;
        margin-bottom:5px;
        text-align:left;
    }
    .bill-total {
        font-weight:bold;
        color:#d7006a;
    }

    .del-btn {
        font-size:22px;
        color:red;
        cursor:pointer;
        user-select:none;
    }

    /* ============ ‡∏ß‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç Grid ============ */
    .win-grid {
        display:grid;
        grid-template-columns: repeat(5, 1fr);
        gap:8px;
        margin-top:10px;
    }
    .win-btn {
        background:#ffe9a8;
        padding:15px 0;
        border-radius:10px;
        font-size:20px;
        font-weight:bold;
        cursor:pointer;
        border:2px solid #f6c56e;
        text-align:center;
    }
    .win-btn.active {
        background:#ffb700;
        color:white;
        border-color:#ff9800;
    }

</style>
</head>

<body>

<div class="box">

    <h2>‡∏´‡∏ß‡∏¢ Simulator Demo</h2>

    <div class="mode-row">
        <button class="mode-btn active" id="btn2d" onclick="switchMode('2d')">2 ‡∏ï‡∏±‡∏ß</button>
        <button class="mode-btn" id="btn3d" onclick="switchMode('3d')">3 ‡∏ï‡∏±‡∏ß</button>
        <button class="mode-btn" id="btn19" onclick="switchMode('19')">‡∏£‡∏π‡∏î 19</button>
        <button class="mode-btn" id="btnRun" onclick="switchMode('run')">‡∏ß‡∏¥‡πà‡∏á</button>
        <button class="mode-btn" id="btnWin" onclick="switchMode('win')">‡∏ß‡∏¥‡∏ô</button>
    </div>

    <!-- ‡∏≠‡∏¥‡∏ô‡∏û‡∏∏‡∏ï 2/3 ‡∏ï‡∏±‡∏ß -->
    <div id="zoneMain">
        <input id="inputMain" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡∏Ç 2/3 ‡∏ï‡∏±‡∏ß">
    </div>

    <!-- ‡πÇ‡∏ã‡∏ô‡∏£‡∏π‡∏î -->
    <div id="zoneRood" style="display:none;">
        <input id="inputRood" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏π‡∏î‡∏ó‡∏µ‡∏•‡∏∞‡∏ï‡∏±‡∏ß">
    </div>

    <!-- ‡πÇ‡∏ã‡∏ô‡∏ß‡∏¥‡πà‡∏á -->
    <div id="zoneRun" style="display:none;">
        <input id="inputRun" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ß‡∏¥‡πà‡∏á‡∏ó‡∏µ‡∏•‡∏∞‡∏ï‡∏±‡∏ß">
    </div>

    <!-- üî• ‡πÇ‡∏ã‡∏ô‡∏ß‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà -->
    <div id="zoneWin" style="display:none; margin-top:20px;">
        <div style="margin-bottom:10px;">
            <label><input type="radio" name="winMode" value="2" checked> ‡∏à‡∏±‡∏ö‡∏ß‡∏¥‡∏ô 2 ‡∏ï‡∏±‡∏ß</label>
            <label><input type="radio" name="winMode" value="3"> ‡∏à‡∏±‡∏ö‡∏ß‡∏¥‡∏ô 3 ‡∏ï‡∏±‡∏ß</label>
        </div>

        <div style="margin-bottom:15px;">
            <label><input type="radio" name="winDup" value="no" checked> ‡∏à‡∏±‡∏ö‡∏ß‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°‡πÄ‡∏•‡∏Ç‡πÄ‡∏ö‡∏¥‡πâ‡∏•</label>
            <label><input type="radio" name="winDup" value="yes"> ‡∏à‡∏±‡∏ö‡∏ß‡∏¥‡∏ô‡∏£‡∏ß‡∏°‡πÄ‡∏•‡∏Ç‡πÄ‡∏ö‡∏¥‡πâ‡∏•</label>
        </div>

        <div style="font-weight:bold; margin-bottom:10px;">
            ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏ß‡∏¥‡∏ô 2 - 7 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
        </div>

        <div id="winDigits" class="win-grid"></div>

        <div style="display:flex; gap:10px; margin-top:15px;">
            <button class="btn-add" onclick="winCalculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
            <button class="btn-rev" onclick="winReverse()">‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ß‡∏¥‡∏ô</button>
            <button class="btn-clear" onclick="winClear()" style="background:#ff4c4c;color:white;">üóë ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>
    </div>

    <div class="numbers-container" id="numbersContainer"></div>

</div>

<script src="win_script.js"></script>

</body>
</html>
let currentNums = [];
let mode = "2d";

/* ‡πÇ‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏ô */
let winSelected = [];

/* ========== ‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î ========== */
function switchMode(m){
    mode = m;

    document.querySelectorAll(".mode-btn").forEach(x=>x.classList.remove("active"));
    document.getElementById("btn2d").classList.toggle("active", m==="2d");
    document.getElementById("btn3d").classList.toggle("active", m==="3d");
    document.getElementById("btn19").classList.toggle("active", m==="19");
    document.getElementById("btnRun").classList.toggle("active", m==="run");
    document.getElementById("btnWin").classList.toggle("active", m==="win");

    document.getElementById("zoneMain").style.display = (m==="2d"||m==="3d")?"block":"none";
    document.getElementById("zoneRood").style.display = m==="19"?"block":"none";
    document.getElementById("zoneRun").style.display  = m==="run"?"block":"none";
    document.getElementById("zoneWin").style.display  = m==="win"?"block":"none";

    if(m==="win"){
        winSelected=[];
        initWinButtons();
    }

    currentNums=[];
    renderNumbers();
}

/* ========== ‡∏ß‡∏≤‡∏î pill ========== */
function renderNumbers(){
    const box = document.getElementById("numbersContainer");
    box.innerHTML="";

    currentNums.forEach((x,i)=>{
        let b=document.createElement("button");
        b.className="num-pill";
        b.textContent=x.val;
        b.onclick=()=>{
            currentNums.splice(i,1);
            renderNumbers();
        };
        box.appendChild(b);
    });
}

/* ========== ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° 0-9 ========== */
function initWinButtons(){
    const zone=document.getElementById("winDigits");
    zone.innerHTML="";

    function addBtn(n){
        let b=document.createElement("div");
        b.className="win-btn";
        b.textContent=n;

        b.onclick=()=>{
            if(b.classList.contains("active")){
                b.classList.remove("active");
                winSelected = winSelected.filter(v=>v!==String(n));
            }else{
                if(winSelected.length>=7) return;
                b.classList.add("active");
                winSelected.push(String(n));
            }
        };

        zone.appendChild(b);
    }

    for(let i=1;i<=9;i++) addBtn(i);
    addBtn(0);
}

/* ========== ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏¥‡∏ô ========== */
function winCalculate(){
    if(winSelected.length < 2){
        alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß");
        return;
    }

    let type = document.querySelector("input[name='winMode']:checked").value;
    let allowDup = document.querySelector("input[name='winDup']:checked").value==="yes";

    let out = [];

    if(type==="2"){
        for(let i=0;i<winSelected.length;i++){
            for(let j=i+1;j<winSelected.length;j++){
                let a=winSelected[i], b=winSelected[j];
                if(!allowDup && a===b) continue;
                out.push(a+b);
            }
        }
    }

    if(type==="3"){
        for(let i=0;i<winSelected.length;i++){
            for(let j=i+1;j<winSelected.length;j++){
                for(let k=j+1;k<winSelected.length;k++){
                    let a=winSelected[i], b=winSelected[j], c=winSelected[k];
                    if(!allowDup && (a===b || b===c || a===c)) continue;
                    out.push(a+b+c);
                }
            }
        }
    }

    currentNums = out.map(x=>({val:x}));
    renderNumbers();
}

/* ========== reverse ‡∏ä‡∏∏‡∏î‡∏ß‡∏¥‡∏ô ========== */
function winReverse(){
    currentNums = currentNums.map(o=>{
        return { val: o.val.split("").reverse().join("") };
    });
    renderNumbers();
}

/* ========== ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ========== */
function winClear(){
    winSelected=[];
    document.querySelectorAll(".win-btn").forEach(b=>b.classList.remove("active"));
    currentNums=[];
    renderNumbers();
}
